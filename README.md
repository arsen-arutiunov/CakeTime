# Cake Time API

API для интернет-магазина пирожных.

## Содержание

1.  [Введение](#1-введение)
2.  [Установка и запуск](#2-установка-и-запуск)
3.  [Аутентификация](#3-аутентификация)
4.  [Документация API](#4-документация-api)
    * [4.1. Аутентификация и управление пользователями](#41-аутентификация-и-управление-пользователями)
    * [4.2. Управление продуктами](#42-управление-продуктами)
    * [4.3. Управление корзиной](#43-управление-корзиной)
    * [4.4. Управление заказами](#44-управление-заказами)
5.  [Обработка ошибок](#5-обработка-ошибок)
6.  [Валидация данных](#6-валидация-данных)
7.  [Пагинация и фильтрация](#7-пагинация-и-фильтрация)
8.  [Swagger/ReDoc](#8-swaggerredoc)
9.  [Тестирование](#9-тестирование)
10. [Развертывание](#10-развертывание)
11. [Вклад в проект](#11-вклад-в-проект)
12. [Лицензия](#12-лицензия)

## 1. Введение

Этот API предназначен для управления интернет-магазином пирожных. Он позволяет пользователям регистрироваться, просматривать и заказывать продукты, а также управлять своей корзиной и заказами. API разработан с использованием Django REST Framework и использует JWT аутентификацию.

## 2. Установка и запуск

1.  Клонируйте репозиторий: `git clone <repository_url>`
2.  Создайте виртуальное окружение: `python -m venv venv`
3.  Активируйте виртуальное окружение:
    * Windows: `venv\Scripts\activate`
    * macOS/Linux: `source venv/bin/activate`
4.  Установите зависимости: `pip install -r requirements.txt`
5.  Создайте файл `.env` на основе `sample.env` и заполните необходимые переменные окружения.
6.  Выполните миграции: `python manage.py migrate`
7.  Запустите сервер: `python manage.py runserver`

Для запуска в Docker:

1.  Установите Docker и Docker Compose.
2.  Выполните `docker-compose up --build`.

## 3. Аутентификация

API использует JWT аутентификацию. Для получения JWT токенов необходимо выполнить запрос `POST /api/login/` с учетными данными пользователя. Полученные токены необходимо передавать в заголовке `Authorization: Bearer <token>` при выполнении запросов к защищенным эндпоинтам.

## 4. Документация API

### 4.1. Аутентификация и управление пользователями

#### 4.1.1. Регистрация нового пользователя

* **Метод:** `POST`
* **Эндпоинт:** `/api/register/`
* **Описание:** Регистрация нового пользователя.
* **Запрос:**

```json
{
    "email": "user@example.com",
    "username": "newuser",
    "password": "securepassword",
    "first_name": "John",
    "last_name": "Doe",
    "phone": "+38 000 000 00 00"
}
```

* **Ответ (201 Created):**

```json
{
    "id": 1,
    "username": "newuser",
    "email": "user@example.com"
}
```

#### 4.1.2. Аутентификация пользователя

* **Метод:** `POST`
* **Эндпоинт:** `/api/login/`
* **Описание:** Аутентификация пользователя и получение JWT токенов.
* **Запрос:**

```json
{
    "email": "user@example.com",
    "password": "securepassword"
}
```

* **Ответ (200 OK):**

```json
{
    "access": "jwt_access_token",
    "refresh": "jwt_refresh_token"
}
```

#### 4.1.3. Получение профиля пользователя

* **Метод:** `GET`
* **Эндпоинт:** `/api/profile/`
* **Описание:** Получение профиля аутентифицированного пользователя.
* **Ответ (200 OK):**

```json
{
    "id": 1,
    "username": "newuser",
    "email": "user@example.com",
    "first_name": "John",
    "last_name": "Doe",
    "phone": "+38 000 000 00 00"
}
```

#### 4.1.4. Обновление профиля пользователя

* **Метод:** `PATCH`
* **Эндпоинт:** `/api/profile/`
* **Описание:** Обновление профиля аутентифицированного пользователя.
* **Запрос:**

```json
{
    "username": "updateduser"
}
```

* **Ответ (200 OK):**

```json
{
    "id": 1,
    "username": "updateduser",
    "email": "user@example.com",
    "first_name": "John",
    "last_name": "Doe",
    "phone": "+38 000 000 00 00"
}
```

### 4.2. Управление продуктами

#### 4.2.1. Получение списка продуктов

* **Метод:** `GET`
* **Эндпоинт:** `/api/products/`
* **Описание:** Получение списка всех продуктов.
* **Ответ (200 OK):**

```json
[
    {
        "id": 1,
        "name": "Chocolate Cake",
        "description": "Delicious chocolate cake",
        "price": "25.99",
        "image": "/media/products/chocolate_cake.jpg",
        "category": {
            "id": 1,
            "name": "Cakes"
        }
    }
]
```

### 4.3. Управление корзиной

#### 4.3.1. Получение корзины

* **Метод:** `GET`
* **Эндпоинт:** `/api/cart/`
* **Описание:** Получение корзины аутентифицированного пользователя.
* **Ответ (200 OK):**

```json
{
    "id": 1,
    "items": [
        {
            "product": {
                "id": 1,
                "name": "Chocolate Cake",
                "price": "25.99"
            },
            "quantity": 2
        }
    ],
    "total_price": "51.98"
}
```

### 4.4. Управление заказами

#### 4.4.1. Получение списка заказов

* **Метод:** `GET`
* **Эндпоинт:** `/api/orders/`
* **Описание:** Получение списка заказов аутентифицированного пользователя.
* **Ответ (200 OK):**

```json
[
    {
        "id": 1,
        "items": [
            {
                "product": {
                    "id": 1,
                    "name": "Chocolate Cake",
                    "price": "25.99"
                },
                "quantity": 2
            }
        ],
        "total_price": "51.98",
        "status": "pending"
    }
]
```

## 5. Обработка ошибок

API возвращает коды ошибок HTTP в соответствии со стандартом. Например:

* 400 Bad Request: Некорректный запрос.
* 401 Unauthorized: Требуется аутентификация.
* 403 Forbidden: Доступ запрещен.
* 404 Not Found: Ресурс не найден.

## 6. Валидация данных

При создании или обновлении ресурсов API проверяет корректность данных. Например, поля